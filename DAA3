// Program 3: Quick Sort

#include<stdio.h>
int swapCnt = 0, comp = 0;
void swap(int *a, int *b){
    int temp = *a;
    *a = *b;
    *b = temp;
}

int partition(int arr[], int low, int high){
    int pivot = arr[low];
    int i = low, j = high;
    
    while(i < j){
        comp++;
        while(arr[i]<=pivot && i <= high) i++, comp++;
        while(arr[j]>pivot && j >= low) j--, comp++;
        if(i < j){
            comp++;
            swap(&arr[i], &arr[j]);
            swapCnt++;
        }
    }
    swap(&arr[low], &arr[j]); // arr[low] is pivot here
    swapCnt++;
    return j;
}

void quickSort(int arr[], int low ,int high){
    if(low < high){
        int pidx = partition(arr, low, high);
        quickSort(arr, low, pidx-1);
        quickSort(arr, pidx + 1, high);
    }
}

int main(){
    int n;
    scanf("%d",&n);
    int arr[100];
    for(int i = 0;i<n;i++) scanf("%d",&arr[i]);
    quickSort(arr, 0, n-1);
    for(int i =0;i<n;i++) printf("%d ",arr[i]);
    printf("\nSwap: %d, Comparison: %d\n", swapCnt, comp);
    return 0;
}
